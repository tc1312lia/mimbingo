<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Tap In Bingo | Melanated in Melbourne</title>
<style>
  :root {
    --mim-purple: #4527a0;
    --mim-dark: #1b0b30;
    --mim-gold: #ffca28;
    --mim-gold-soft: #ffd54f;
    --text-light: #fdf7ff;
    --text-muted: #cbb9e5;
  }

  body {
    margin: 0;
    min-height: 100vh;
    background: radial-gradient(circle at top, var(--mim-purple), var(--mim-dark));
    color: var(--text-light);
    font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 20px;
  }

  .brand {
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--mim-gold);
    margin-bottom: 6px;
  }

  h1 {
    margin: 0 0 8px;
  }

  .subtitle {
    margin-bottom: 16px;
    color: var(--text-muted);
    text-align: center;
  }

  .banner {
    background: rgba(34, 21, 54, 0.85);
    border: 1px solid rgba(255,255,255,0.12);
    border-radius: 12px;
    padding: 12px;
    text-align: center;
    margin-bottom: 14px;
  }

  .bingo-board {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 8px;
    width: 90vw;
    max-width: 450px;
    margin-bottom: 18px;
  }

  .square {
    background: rgba(28, 20, 52, 0.85);
    border: 1px solid rgba(255,255,255,0.18);
    border-radius: 10px;
    padding: 10px;
    text-align: center;
    font-size: 0.82rem;
    transition: all 0.3s ease;
  }

  .square.filled {
    background: var(--mim-gold);
    color: var(--mim-dark);
    font-weight: 600;
    box-shadow: 0 0 10px rgba(255, 213, 79, 0.5);
  }

  .reward {
    display: none;
    border: 1px solid var(--mim-gold-soft);
    border-radius: 12px;
    background: rgba(255, 214, 79, 0.1);
    color: var(--mim-gold);
    padding: 14px;
    text-align: center;
  }
</style>
</head>
<body>
  <div class="brand">Melanated in Melbourne</div>
  <h1>ðŸ“¡ Tap In Bingo</h1>
  <p class="subtitle">Scan NFC tags around the space. Fill a row, column, or diagonal to win!</p>

  <div id="message" class="banner">Loadingâ€¦</div>

  <div id="bingo-grid" class="bingo-board"></div>

  <div id="reward" class="reward">
    ðŸŽ‰ Bingo! Youâ€™ve completed a Tap In line â€” show this to a host for your reward.
  </div>

<script>
(function(){
  const TAGS = {
    tag1: {label:'Song of the Week'},
    tag2: {label:'Meet Someone New'},
    tag3: {label:'MiM Episode Tag'},
    tag4: {label:'Compliment Swap'},
    tag5: {label:'Laugh Together'},
    tag6: {label:'Share a Goal'},
    tag7: {label:'Tap with Host'},
    tag8: {label:'Solo Moment'},
    tag9: {label:'Creative Spark'},
    tag10:{label:'Stories We Need'},
    tag11:{label:'Grounded Space'},
    tag12:{label:'Gratitude Tap'},
    tag13:{label:'Find Someone in Yellow'},
    tag14:{label:'Your Soundtrack'},
    tag15:{label:'Community Wish'},
    tag16:{label:'Podcast Pitch'},
    tag17:{label:'Ask â€œWhat Brings You Joy?â€'},
    tag18:{label:'Episode Tap'},
    tag19:{label:'Deep Breath'},
    tag20:{label:'Reflect & Share'},
    tag21:{label:'Selfie Tag'},
    tag22:{label:'Connection Tap'},
    tag23:{label:'Free Space'},
    tag24:{label:'Proud Moment'},
    tag25:{label:'Hidden Gem'}
  };

  const STORAGE_KEY='mim_bingo_state';
  const state=loadState();
  const tagParam=new URLSearchParams(window.location.search).get('tag');
  const messageEl=document.getElementById('message');
  const grid=document.getElementById('bingo-grid');
  const reward=document.getElementById('reward');

  if(tagParam && TAGS[tagParam]){
    if(!state.collected.includes(tagParam)){
      state.collected.push(tagParam);
      saveState();
      messageEl.textContent=`âœ… You unlocked: ${TAGS[tagParam].label}`;
    }
  }else if(!tagParam){
    messageEl.textContent='Tap a tag to fill your Bingo board!';
  }

  renderBoard();
  checkForBingo();

  function loadState(){
    try{
      const raw=localStorage.getItem(STORAGE_KEY);
      return raw?JSON.parse(raw):{collected:[]};
    }catch{return{collected:[]}}
  }
  function saveState(){localStorage.setItem(STORAGE_KEY,JSON.stringify(state));}

  function renderBoard(){
    grid.innerHTML='';
    Object.entries(TAGS).forEach(([id,cfg])=>{
      const sq=document.createElement('div');
      sq.className='square'+(state.collected.includes(id)?' filled':'');
      sq.textContent=cfg.label;
      grid.appendChild(sq);
    });
  }

  function checkForBingo(){
    const filled=state.collected;
    const ids=Object.keys(TAGS);
    const board=Array.from({length:5},(_,r)=>ids.slice(r*5,(r+1)*5));
    const win=board.some(row=>row.every(id=>filled.includes(id)))||
              [...Array(5).keys()].some(c=>board.every(r=>filled.includes(r[c])))||
              board.every((r,i)=>filled.includes(r[i]))||
              board.every((r,i)=>filled.includes(r[4-i]));
    if(win) reward.style.display='block';
  }
})();
</script>
</body>
</html>
